# 网络核心

## 1.分组交换

分组交换中各端系统彼此交换报文, 通常将报文分为较小的数据块,被称为分组,在源和目的地之间,每个分组都通过通信链路和分组交换机以等于最大传输速率的速度进行传输

### 1.1 存储转发传输

存储转发传输指的是在交换机能够开始向传输链路传输该分组的第一个比特之前,必须接受到整个分组

假设在L/R秒的时候,路由器接受到所有的分组,当2L/R秒的时候,路由器已经传递了所有的分组,并且被目的地所接受,总延时为L/R

通过n条速率为R的链路组成的另一家,从源到目的地发送一个分组,得到的端到端的时延为NL/R

### 1.2 排队时延和分组丢失

输出队列: 每台交换机有多台链路与之相连,对于每条相连的链路,该分组交换机具有一个输出缓存(输出队列),在该链路上有其他的分组在传输的时候,分组还需要去承受输出缓存的排队时延

### 1.3 转发表和路由选择协议

主要介绍的是在传输的时候,如何选择我们的路径

每个端系统中都具有一个被称为IP地址的地址,当源主机向目的地发送一个分组的时候,其实在分组的首部就包含了目的地的IP地址,每台路由器都具有一个转发表,用来将我们的目的地址的一部分给映射为我们输出链路的一部分

## 2.电路交换

不同点在于我们需要去为我们的通信预留资源, 在电路的交换中,如果有四个主机,那么我们需要有四个交换机和线路去实现我们的交换,在我们的每两台主机之间实现我们的通信,

### 2.1 电路交换网络中的复用

即在我们的电路的传输中,我们信号的传输是以周期进行的,而在这个周期下,我们可以在间隔的周期下去进行传输

比如 1 2 1 2 1 2

在频率复用中,如果链路中每秒传输8000个帧, 每个时隙由八个比特构成,则每条电路的传输速率为64kb

## 3. 网络的网络

指的是由ISP接入我们的IXP汇集点,再由进入我们更上一层的ISP

### 3.1 分组网络中时延概述

处理延时: 比如检查分组导向何处和比特层面的错误是需要时间的

排队时延: 当分组在链路上等待传输的时候,它经受排队时延, 一个特定分组的排队时延包括其他的因素

传输时延: 只有当所有的分组都被传输之后,才能传输到刚刚达到的分组,假设我们的分组的长度为L, 传输的速度为R, 那么我们的时间延时就是L/R

传播时延: 一旦一个比特被推向链路,该比特需要向路由器B传播,从起点到路由器B传播所需要的时间是我们的传播时延



## 协议分层

1. 应用层: 提供了网络协议,如传输网站时的http,传输电子邮件的SMTO..
2. 运输层: 在应用程序端点之间传输应用层报文
3. 网络层: 因特网的网络层负责将称为数据报的网路层分组从一台主机移动到另外一台主机,相当于时在邮局寄信的时候提供一个地址,就是我们本机的IP
4. 链路层: 通过源和目的地之间一系列的传输,链路层也被称为是“帧”
5. 物理层: 将整个帧从一个网络元素移动到相邻的网络元素

